(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{283:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>d});var r=a(5155),s=a(7039),l=a(3004),n=a(2115),i=a(5695);let o=(0,n.createContext)(void 0),d=e=>{let{children:t}=e,[a,d]=(0,n.useState)(null),[c,m]=(0,n.useState)(!0),u=(0,i.useRouter)();(0,n.useEffect)(()=>{if(!s.j){console.error("[AuthContext] Firebase Auth not initialized."),m(!1);return}let e=(0,l.hg)(s.j,e=>{d(e),m(!1)});return()=>e()},[]);let f=async()=>{if(!s.j){console.error("[AuthContext] Firebase Auth not available to logout."),d(null),u.push("/login");return}try{await (0,l.CI)(s.j),u.push("/login")}catch(e){console.error("Error signing out: ",e)}};return(0,r.jsx)(o.Provider,{value:{user:a,loading:c,logout:f},children:t})},c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var r=a(5155),s=a(2115),l=a(9708),n=a(2085),i=a(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,r.jsx)(m,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},2383:()=>{},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},3686:()=>{},5057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var r=a(5155),s=a(2115),l=a(968),n=a(2085),i=a(9434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,i.cn)(o(),a),...s})});d.displayName=l.b.displayName},5297:(e,t,a)=>{"use strict";a.d(t,{Dp:()=>m,EC:()=>i,Jt:()=>n,K5:()=>o,RH:()=>c,ci:()=>d});var r=a(7039),s=a(5317);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="";for(let r=0;r<e;r++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},n=async(e,t)=>{if(!r.db)throw Error("Firestore not initialized");let a=(0,s.H9)(r.db,"users",e.uid);(await (0,s.x7)(a)).exists()||await (0,s.BN)(a,{uid:e.uid,email:e.email,displayName:t,createdAt:(0,s.O5)()})},i=async(e,t)=>{var a,n;if(!r.db)throw Error("Firestore not initialized");let i=l(8),o=(0,s.H9)((0,s.rJ)(r.db,"organizations")),d={name:t.trim(),ownerUid:e,inviteCode:i,memberUids:[e]};await (0,s.BN)(o,{...d,createdAt:(0,s.O5)()});let c=(await (0,s.x7)(o)).data();return{id:o.id,name:null==c?void 0:c.name,ownerUid:null==c?void 0:c.ownerUid,inviteCode:null==c?void 0:c.inviteCode,memberUids:null==c?void 0:c.memberUids,createdAt:null!=(n=null==c||null==(a=c.createdAt)?void 0:a.toDate())?n:new Date}},o=async(e,t)=>{if(!r.db)throw Error("Firestore not initialized");let a=(0,s.rJ)(r.db,"organizations"),l=(0,s.P)(a,(0,s._M)("inviteCode","==",t.trim())),n=await (0,s.GG)(l);if(n.empty)return null;let i=n.docs[0];await (0,s.mZ)(i.ref,{memberUids:(0,s.hq)(e)});let o=i.data();return{id:i.id,name:o.name,ownerUid:o.ownerUid,inviteCode:o.inviteCode,memberUids:[...o.memberUids,e],createdAt:o.createdAt.toDate()}},d=async e=>{if(!r.db)throw Error("Firestore not initialized");let t=(0,s.rJ)(r.db,"organizations"),a=(0,s.P)(t,(0,s._M)("ownerUid","==",e)),l=(0,s.P)(t,(0,s._M)("memberUids","array-contains",e)),[n,i]=await Promise.all([(0,s.GG)(a),(0,s.GG)(l)]),o=new Map,d=e=>{e.forEach(e=>{if(!o.has(e.id)){var t,a;let r=e.data();o.set(e.id,{id:e.id,name:r.name,ownerUid:r.ownerUid,inviteCode:r.inviteCode,memberUids:r.memberUids,createdAt:null!=(a=null==(t=r.createdAt)?void 0:t.toDate())?a:new Date})}})};return d(n),d(i),Array.from(o.values())},c=async e=>{if(!r.db)throw Error("Firestore not initialized");let t=(0,s.H9)(r.db,"organizations",e),a=await (0,s.x7)(t);if(!a.exists())throw Error("Organization not found.");let l=a.data().memberUids||[];if(0===l.length)return[];let n=(0,s.rJ)(r.db,"users"),i=(0,s.P)(n,(0,s._M)("uid","in",l));return(await (0,s.GG)(i)).docs.map(e=>e.data())},m=async e=>{if(!r.db)throw Error("Firestore not initialized");let t=(0,s.H9)(r.db,"organizations",e);await (0,s.kd)(t)}},5503:(e,t,a)=>{Promise.resolve().then(a.bind(a,6867))},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>m});var r=a(5155),s=a(2115),l=a(9434);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});m.displayName="CardFooter"},6867:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eP});var r=a(5155),s=a(2115),l=a(6766),n=a(285),i=a(2523),o=a(5057),d=a(9434);let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});c.displayName="Textarea";var m=a(6695),u=a(7481),f=a(3013),x=a(172),p=a(3349),h=a(8350),g=a(5599),y=a(7223),b=a(4301),j=a(286),v=a(8328),N=a(2543),w=a(1721),C=a(8551),k=a(3864),A=a(594),S=a(5222),z=a(1920),_=a(8718);let E=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,d.cn)("w-full caption-bottom text-sm",a),...s})})});E.displayName="Table";let O=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,d.cn)("[&_tr]:border-b",a),...s})});O.displayName="TableHeader";let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...s})});R.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let I=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});I.displayName="TableRow";let T=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});T.displayName="TableHead";let D=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});D.displayName="TableCell";let M=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...s})});M.displayName="TableCaption";var P=a(7655);let U=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(P.bL,{ref:t,className:(0,d.cn)("relative overflow-hidden",a),...l,children:[(0,r.jsx)(P.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(L,{}),(0,r.jsx)(P.OK,{})]})});U.displayName=P.bL.displayName;let L=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...l}=e;return(0,r.jsx)(P.VM,{ref:t,orientation:s,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,r.jsx)(P.lr,{className:"relative flex-1 rounded-full bg-border"})})});L.displayName=P.VM.displayName;let F=(0,a(2085).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function V(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,d.cn)(F({variant:a}),t),...s})}var G=a(9613);let J=G.Kq,Z=G.bL,H=G.l9,$=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(G.UC,{ref:t,sideOffset:s,className:(0,d.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})});$.displayName=G.UC.displayName;var B=a(4504);function W(e){let{logs:t,userRole:a,currentUserName:l,displayDate:n}=e,[i,o]=(0,s.useState)(null),d=t.length;(0,s.useEffect)(()=>{n?o((0,f.GP)(n,"M/d/yyyy")):o(null)},[n]);let c="member"===a?"A list of your volunteer logs for ".concat(i||"the selected date","."):"A list of volunteer logs for ".concat(i||"the selected date"," for the organization.");return(0,r.jsxs)("div",{className:"w-full",children:[i?(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:[d," ",1===d?"entry":"entries"," for ",i,"member"===a&&l?" (showing only for ".concat(l,")"):""]}):(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-4",children:[d," ",1===d?"entry":"entries"]}),0===t.length?(0,r.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"member"===a?"You have no volunteer logs for ".concat(i||"this date"," yet."):"No volunteer logs for ".concat(i||"this date"," yet.")}):(0,r.jsx)(U,{className:"h-[300px] rounded-md border",children:(0,r.jsx)(J,{children:(0,r.jsxs)(E,{children:[(0,r.jsx)(M,{children:c}),(0,r.jsx)(O,{children:(0,r.jsxs)(I,{children:[(0,r.jsx)(T,{children:"Volunteer"}),(0,r.jsx)(T,{children:"Clock In"}),(0,r.jsx)(T,{children:"Clock Out"}),(0,r.jsx)(T,{children:"Duration"}),(0,r.jsx)(T,{children:"Status"}),(0,r.jsx)(T,{className:"text-center",children:"Note"})]})}),(0,r.jsx)(R,{children:t.map(e=>(0,r.jsxs)(I,{className:e.name===l&&"member"===a?"bg-primary/10":"",children:[(0,r.jsx)(D,{className:"font-medium",children:e.name}),(0,r.jsx)(D,{children:(0,f.GP)(e.clockIn,"pp")}),(0,r.jsx)(D,{children:e.clockOut?(0,f.GP)(e.clockOut,"pp"):"---"}),(0,r.jsx)(D,{children:function(e,t){if(!t)return"--";let a=t.getTime()-e.getTime();if(a<0)return"Invalid";let r=a,s=Math.floor(r/36e5),l=Math.floor((r%=36e5)/6e4),n=Math.floor((r%=6e4)/1e3);return"".concat(s,"h ").concat(l,"m ").concat(n,"s")}(e.clockIn,e.clockOut)}),(0,r.jsx)(D,{children:e.clockOut?(0,r.jsx)(V,{variant:"default",className:"bg-green-500 hover:bg-green-600",children:"Completed"}):(0,r.jsx)(V,{variant:"secondary",className:"bg-yellow-500 hover:bg-yellow-600",children:"In Progress"})}),(0,r.jsx)(D,{className:"text-center",children:e.note?(0,r.jsxs)(Z,{children:[(0,r.jsx)(H,{asChild:!0,children:(0,r.jsx)(B.A,{className:"h-5 w-5 text-muted-foreground cursor-help"})}),(0,r.jsx)($,{side:"top",className:"max-w-xs break-words",children:(0,r.jsx)("p",{children:e.note})})]}):(0,r.jsx)("span",{className:"text-muted-foreground/50",children:"---"})})]},e.id))})]})})})]})}var K=a(3925),q=a(4520);let Y=q.bL,X=q.l9,Q=q.ZL,ee=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(q.hJ,{className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});ee.displayName=q.hJ.displayName;let et=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)(Q,{children:[(0,r.jsx)(ee,{}),(0,r.jsx)(q.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});et.displayName=q.UC.displayName;let ea=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};ea.displayName="AlertDialogHeader";let er=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};er.displayName="AlertDialogFooter";let es=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(q.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold",a),...s})});es.displayName=q.hE.displayName;let el=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(q.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})});el.displayName=q.VY.displayName;let en=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(q.rc,{ref:t,className:(0,d.cn)((0,n.r)(),a),...s})});en.displayName=q.rc.displayName;let ei=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(q.ZD,{ref:t,className:(0,d.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});ei.displayName=q.ZD.displayName;var eo=a(83),ed=a(9556),ec=a(7381),em=a(518);let eu=eo.bL;eo.YJ;let ef=eo.WT,ex=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(eo.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[s,(0,r.jsx)(eo.In,{asChild:!0,children:(0,r.jsx)(ed.A,{className:"h-4 w-4 opacity-50"})})]})});ex.displayName=eo.l9.displayName;let ep=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eo.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(ec.A,{className:"h-4 w-4"})})});ep.displayName=eo.PP.displayName;let eh=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eo.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(ed.A,{className:"h-4 w-4"})})});eh.displayName=eo.wn.displayName;let eg=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...n}=e;return(0,r.jsx)(eo.ZL,{children:(0,r.jsxs)(eo.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,r.jsx)(ep,{}),(0,r.jsx)(eo.LM,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(eh,{})]})})});eg.displayName=eo.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eo.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=eo.JU.displayName;let ey=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(eo.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(eo.VF,{children:(0,r.jsx)(em.A,{className:"h-4 w-4"})})}),(0,r.jsx)(eo.p4,{children:s})]})});ey.displayName=eo.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eo.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=eo.wv.displayName;var eb=a(965),ej=a(3158),ev=a(3900);function eN(e){let{className:t,classNames:a,showOutsideDays:s=!0,...l}=e;return(0,r.jsx)(ev.hv,{showOutsideDays:s,className:(0,d.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,n.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,n.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,r.jsx)(eb.A,{className:(0,d.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,r.jsx)(ej.A,{className:(0,d.cn)("h-4 w-4",t),...a})}},...l})}eN.displayName="Calendar";var ew=a(547);let eC=ew.bL,ek=ew.l9,eA=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:l=4,...n}=e;return(0,r.jsx)(ew.ZL,{children:(0,r.jsx)(ew.UC,{ref:t,align:s,sideOffset:l,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});eA.displayName=ew.UC.displayName;var eS=a(9449),ez=a(154);let e_=eS.bL,eE=eS.l9;eS.YJ,eS.ZL,eS.Pb,eS.z6,s.forwardRef((e,t)=>{let{className:a,inset:s,children:l,...n}=e;return(0,r.jsxs)(eS.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...n,children:[l,(0,r.jsx)(ej.A,{className:"ml-auto"})]})}).displayName=eS.ZP.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eS.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})}).displayName=eS.G5.displayName;let eO=s.forwardRef((e,t)=>{let{className:a,sideOffset:s=4,...l}=e;return(0,r.jsx)(eS.ZL,{children:(0,r.jsx)(eS.UC,{ref:t,sideOffset:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})})});eO.displayName=eS.UC.displayName;let eR=s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(eS.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",a),...l})});eR.displayName=eS.q7.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,checked:l,...n}=e;return(0,r.jsxs)(eS.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:l,...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(eS.VF,{children:(0,r.jsx)(em.A,{className:"h-4 w-4"})})}),s]})}).displayName=eS.H_.displayName,s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(eS.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(eS.VF,{children:(0,r.jsx)(ez.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=eS.hN.displayName,s.forwardRef((e,t)=>{let{className:a,inset:s,...l}=e;return(0,r.jsx)(eS.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",a),...l})}).displayName=eS.JU.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(eS.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=eS.wv.displayName;var eI=a(283),eT=a(5695),eD=a(5297);function eM(){let{user:e,loading:t,logout:a}=(0,eI.A)(),d=(0,eT.useRouter)(),{toast:E}=(0,u.dj)(),[O,R]=(0,s.useState)("loading"),[I,T]=(0,s.useState)("list"),[D,M]=(0,s.useState)([]),[P,U]=(0,s.useState)(!0),[L,F]=(0,s.useState)(null),[V,G]=(0,s.useState)(null),[J,Z]=(0,s.useState)(!1),[H,$]=(0,s.useState)(null),[B,q]=(0,s.useState)([]),[Q,ee]=(0,s.useState)(""),[eo,ed]=(0,s.useState)(""),[ec,em]=(0,s.useState)(),[ep,eh]=(0,s.useState)(""),[eb,ej]=(0,s.useState)(""),[ev,ew]=(0,s.useState)(""),[eS,ez]=(0,s.useState)(!1),[eM,eP]=(0,s.useState)([]),[eU,eL]=(0,s.useState)(),[eF,eV]=(0,s.useState)("__ALL_VOLUNTEERS__"),[eG,eJ]=(0,s.useState)(!1),[eZ,eH]=(0,s.useState)(""),[e$,eB]=(0,s.useState)(""),[eW,eK]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t||(e?R("orgSelection"):d.push("/login"))},[e,t,d]);let eq=async()=>{if(e){U(!0);try{let t=await (0,eD.ci)(e.uid);M(t)}catch(e){console.error("Error fetching user organizations:",e),E({title:"Error",description:"Could not fetch your organizations.",variant:"destructive"})}finally{U(!1)}}};(0,s.useEffect)(()=>{"orgSelection"===O&&e&&eq()},[O,e]),(0,s.useEffect)(()=>{let e=async()=>{if(L&&"owner"===V)try{let e=await getOrganizationDetails(L.id);F(e)}catch(e){console.error("Error fetching organization details:",e)}};L&&"owner"===V&&setInterval(e,3e4);let t=setInterval(()=>ee((0,f.GP)(new Date,"MM/dd/yyyy - hh:mm:ss a")),1e3);return()=>clearInterval(t)},[]),(0,s.useEffect)(()=>{L&&"owner"===V&&(0,eD.RH)(L.id).then(e=>{eP(e),e.length>0&&ed(e[0].uid)}).catch(e=>{console.error("Failed to fetch org members:",e),E({title:"Error",description:"Could not load organization members.",variant:"destructive"})})},[L,V,E]),(0,s.useEffect)(()=>{if(!L)return void q([]);let e="timeLogs_".concat(L.id),t=localStorage.getItem(e);if(t)try{let e=JSON.parse(t,(e,t)=>"clockIn"===e||"clockOut"===e?t?new Date(t):null:t);q(e)}catch(t){console.error("Failed to parse logs from localStorage (key: ".concat(e,")"),t),localStorage.removeItem(e)}else q([])},[L]),(0,s.useEffect)(()=>{if(L){let e="timeLogs_".concat(L.id);localStorage.setItem(e,JSON.stringify(B))}},[B,L]),(0,s.useEffect)(()=>{let e=new Date;eL(e),em(e)},[]);let eY=t=>{F(t),G(t.ownerUid===(null==e?void 0:e.uid)?"owner":"member"),R("memberView")},eX=e=>{let t="".concat(window.location.origin,"/signup?inviteCode=").concat(e);navigator.clipboard.writeText(t).then(()=>E({title:"Copied!",description:"Invite link copied to clipboard."})).catch(e=>{console.error("Error copying invite link:",e),E({title:"Error",description:"Could not copy invite link.",variant:"destructive"})})},eQ=e=>{$(e),Z(!0)},e0=async()=>{if(H&&e)try{await (0,eD.Dp)(H.id),E({title:"Success",description:'Organization "'.concat(H.name,'" has been deleted.')}),M(e=>e.filter(e=>e.id!==H.id))}catch(e){console.error("Error deleting organization:",e),E({title:"Error",description:"Failed to delete organization.",variant:"destructive"})}finally{Z(!1),$(null)}},e5=async t=>{if(t.preventDefault(),!e||!eZ.trim())return void E({title:"Error",description:"Organization name cannot be empty.",variant:"destructive"});eK(!0);try{await (0,eD.EC)(e.uid,eZ.trim()),E({title:"Success",description:"Organization created successfully."}),await eq(),eH(""),T("list")}catch(e){E({title:"Error",description:"Failed to create organization.",variant:"destructive"})}finally{eK(!1)}},e2=async t=>{if(t.preventDefault(),!e||!e$.trim())return void E({title:"Error",description:"Invite code cannot be empty.",variant:"destructive"});eK(!0);try{let t=await (0,eD.K5)(e.uid,e$.trim());t?(E({title:"Success",description:'Successfully joined "'.concat(t.name,'".')}),await eq(),eB(""),T("list")):E({title:"Error",description:"Invalid invite code or already a member.",variant:"destructive"})}catch(e){E({title:"Error",description:"Failed to join organization.",variant:"destructive"})}finally{eK(!1)}},e1=(null==e?void 0:e.displayName)||(null==e?void 0:e.email)||"Current User",e4=(0,s.useMemo)(()=>{if(!e1)return!1;let e=(0,f.GP)(new Date,"yyyy-MM-dd");return B.some(t=>t.name===e1&&null===t.clockOut&&t.date===e)},[e1,B]),e9=(0,s.useMemo)(()=>{if(!eU)return[];let e=(0,f.GP)(eU,"yyyy-MM-dd"),t=B.filter(t=>t.date===e);return"member"===V&&(t=t.filter(e=>e.name===e1)),t.sort((e,t)=>t.clockIn.getTime()-e.clockIn.getTime())},[B,eU,V,e1]),e3=(0,s.useMemo)(()=>eU?Array.from(new Set(B.filter(e=>e.date===(0,f.GP)(eU,"yyyy-MM-dd")).map(e=>e.name))).sort((e,t)=>e.localeCompare(t)):[],[B,eU]);if(t||"loading"===O)return(0,r.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-secondary/10",children:(0,r.jsx)(x.A,{className:"h-12 w-12 animate-spin text-primary"})});let e8=(0,r.jsxs)("div",{className:"text-center space-y-4 w-full max-w-4xl mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,r.jsx)(l.default,{src:"/logo.png",alt:"KSHT Logo",width:80,height:80,className:"rounded-full shadow-lg","data-ai-hint":"temple logo",priority:!0}),e&&(0,r.jsxs)(n.$,{onClick:a,variant:"outline",size:"sm",children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Logout"]})]}),(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold",children:(0,r.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent text-transparent bg-clip-text",children:"KSHT Volunteer Log"})})]});return"orgSelection"===O?(0,r.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/10 flex flex-col items-center p-4 sm:p-8 space-y-8",children:[e8,(0,r.jsxs)(m.Zp,{className:"w-full max-w-4xl",children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{className:"text-2xl sm:text-3xl",children:"Organization Hub"}),(0,r.jsxs)(m.BT,{children:["list"===I&&"Select an organization to manage, or create/join a new one.","createForm"===I&&"Enter a name for your new organization.","joinForm"===I&&"Enter an invite code to join an organization."]})]}),(0,r.jsx)(m.Wu,{children:P?(0,r.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,r.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary"})}):"list"===I?(0,r.jsxs)(r.Fragment,{children:[D.length>0&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4 border-b pb-2",children:"Your Organizations"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(t=>(0,r.jsxs)(m.Zp,{className:"hover:shadow-lg transition-shadow flex flex-col",children:[(0,r.jsx)("div",{className:"flex-grow cursor-pointer",onClick:()=>eY(t),children:(0,r.jsxs)(m.aR,{children:[(0,r.jsx)(m.ZB,{children:t.name}),(0,r.jsxs)(m.BT,{children:["Role: ",t.ownerUid===(null==e?void 0:e.uid)?"Owner":"Member"]})]})}),t.ownerUid===(null==e?void 0:e.uid)&&(0,r.jsx)(m.wL,{children:(0,r.jsxs)(e_,{children:[(0,r.jsx)(eE,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",className:"ml-auto",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Organization Options"})]})}),(0,r.jsxs)(eO,{align:"end",children:[(0,r.jsxs)(eR,{onClick:()=>eX(t.inviteCode),children:[(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Copy Invite Link"]}),(0,r.jsxs)(eR,{onClick:()=>eQ(t),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Delete Organization"]})]})]})})]},t.id))})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-4 pt-4 border-t",children:[(0,r.jsxs)(n.$,{onClick:()=>T("createForm"),size:"lg",children:[(0,r.jsx)(b.A,{className:"mr-2 h-5 w-5"})," Create New Organization"]}),(0,r.jsxs)(n.$,{onClick:()=>T("joinForm"),variant:"outline",size:"lg",children:[(0,r.jsx)(j.A,{className:"mr-2 h-5 w-5"})," Join with Invite Code"]})]})]}):"createForm"===I?(0,r.jsxs)("form",{onSubmit:e5,className:"space-y-4 max-w-sm mx-auto",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"newOrgName",children:"New Organization Name"}),(0,r.jsx)(i.p,{id:"newOrgName",value:eZ,onChange:e=>eH(e.target.value),required:!0,disabled:eW})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>T("list"),disabled:eW,children:"Cancel"}),(0,r.jsxs)(n.$,{type:"submit",className:"flex-grow",disabled:eW,children:[eW&&(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create"]})]})]}):(0,r.jsxs)("form",{onSubmit:e2,className:"space-y-4 max-w-sm mx-auto",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"joinInviteCode",children:"Invite Code"}),(0,r.jsx)(i.p,{id:"joinInviteCode",value:e$,onChange:e=>eB(e.target.value),required:!0,disabled:eW})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>T("list"),disabled:eW,children:"Cancel"}),(0,r.jsxs)(n.$,{type:"submit",className:"flex-grow",disabled:eW,children:[eW&&(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Join"]})]})]})})]}),(0,r.jsx)(Y,{open:J,onOpenChange:Z,children:(0,r.jsxs)(et,{children:[(0,r.jsxs)(ea,{children:[(0,r.jsx)(es,{children:"Are you absolutely sure?"}),(0,r.jsxs)(el,{children:['This action cannot be undone. This will permanently delete the "',null==H?void 0:H.name,'" organization and all associated data from the database.']})]}),(0,r.jsxs)(er,{children:[(0,r.jsx)(ei,{children:"Cancel"}),(0,r.jsx)(en,{onClick:e0,className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete it"})]})]})})]}):"memberView"===O&&L?(0,r.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-background to-secondary/10 flex flex-col items-center p-4 sm:p-8 space-y-8",children:[(0,r.jsxs)("div",{className:"text-center space-y-4 w-full max-w-2xl mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,r.jsx)(l.default,{src:"/logo.png",alt:"KSHT Logo",width:80,height:80,className:"rounded-full shadow-lg","data-ai-hint":"temple logo",priority:!0}),(0,r.jsxs)(n.$,{onClick:a,variant:"outline",size:"sm",children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Logout"]})]}),(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold",children:(0,r.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent text-transparent bg-clip-text",children:"KSHT Volunteer Log"})}),(0,r.jsxs)("p",{className:"text-lg sm:text-xl text-muted-foreground",children:["Organization: ",L.name," (",e1," - ",V,")"]}),Q&&(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 p-3 sm:p-4 rounded-lg shadow-md bg-gradient-to-r from-primary to-accent text-primary-foreground font-semibold text-md sm:text-lg",children:[(0,r.jsx)(v.A,{className:"mr-2 h-5 w-5 sm:h-6 sm:w-6"}),(0,r.jsx)("span",{children:Q})]})]}),(0,r.jsxs)(n.$,{onClick:()=>{R("orgSelection"),F(null),G(null),q([])},variant:"outline",children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Back to Organizations"]}),(0,r.jsxs)(m.Zp,{className:"w-full max-w-md shadow-xl rounded-xl",children:[(0,r.jsx)(m.aR,{children:(0,r.jsxs)(m.ZB,{className:"flex items-center gap-2 text-xl sm:text-2xl font-semibold",children:[(0,r.jsx)(w.A,{className:"mr-2 h-6 w-6 text-primary"}),"Volunteer Logging"]})}),(0,r.jsx)(m.Wu,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(n.$,{onClick:()=>{let e={id:crypto.randomUUID(),name:e1,clockIn:new Date,clockOut:null,date:(0,f.GP)(new Date,"yyyy-MM-dd")};q(t=>[...t,e])},disabled:!e1.trim()||e4,size:"lg",children:[(0,r.jsx)(C.A,{className:"mr-2 h-5 w-5"})," Clock In"]}),(0,r.jsxs)(n.$,{onClick:()=>{q(e=>{let t=[...e],a=t.findLastIndex(e=>e.name===e1&&null===e.clockOut);return -1!==a?(t[a]={...t[a],clockOut:new Date},t):e})},disabled:!e1.trim()||!e4,size:"lg",className:"bg-accent hover:bg-accent/90",children:[(0,r.jsx)(k.A,{className:"mr-2 h-5 w-5"})," Clock Out"]})]})}),"owner"===V&&(null==L?void 0:L.inviteCode)&&(0,r.jsx)(m.wL,{className:"flex justify-center",children:(0,r.jsxs)("div",{className:"p-3 bg-green-100 dark:bg-green-800/50 rounded-md inline-flex items-center gap-2 text-green-800 dark:text-green-200 font-semibold text-lg",children:[(0,r.jsx)(A.A,{className:"h-5 w-5"}),"Invite Code: ",(0,r.jsx)("span",{className:"font-mono",children:L.inviteCode}),(0,r.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>eX(L.inviteCode),children:[(0,r.jsx)(g.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Copy Invite Code"})]})]})})]}),"owner"===V&&(0,r.jsxs)(m.Zp,{className:"w-full max-w-2xl shadow-xl rounded-xl",children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsxs)(m.ZB,{className:"text-xl sm:text-2xl font-semibold flex items-center gap-2",children:[(0,r.jsx)(S.A,{className:"h-6 w-6 text-primary"})," Manual Volunteer Log Adjustment"]}),(0,r.jsxs)(m.BT,{children:['Manually add or adjust volunteer entries for members in "',L.name,'".']})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),ez(!0);let t=eM.find(e=>e.uid===eo);if(!t||!ec||!ep){E({title:"Missing Information",description:"Please select a volunteer, date, and clock-in time.",variant:"destructive"}),ez(!1);return}try{let e=(0,f.GP)(ec,"yyyy-MM-dd"),[a,r]=ep.split(":").map(Number),s=new Date(ec);s.setHours(a,r,0,0);let l=null;if(eb){let[e,t]=eb.split(":").map(Number);if((l=new Date(ec)).setHours(e,t,0,0),l<=s){E({title:"Invalid Time",description:"Clock-out time must be after clock-in time.",variant:"destructive"}),ez(!1);return}}let n={id:crypto.randomUUID(),name:t.displayName,clockIn:s,clockOut:l,date:e,note:ev.trim()||void 0};q(e=>[...e,n]),E({title:"Manual Entry Added",description:"Log added for ".concat(t.displayName,".")}),eh(""),ej(""),ew("")}catch(e){console.error("Error adding manual entry:",e),E({title:"Error",description:"Could not add manual entry.",variant:"destructive"})}finally{ez(!1)}},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"manualVolunteerSelect",children:"Volunteer"}),(0,r.jsxs)(eu,{value:eo,onValueChange:ed,disabled:0===eM.length||eS,children:[(0,r.jsx)(ex,{id:"manualVolunteerSelect",children:(0,r.jsx)(ef,{placeholder:"Select volunteer"})}),(0,r.jsx)(eg,{children:eM.length>0?eM.map(e=>(0,r.jsxs)(ey,{value:e.uid,children:[e.displayName," (",e.email,")"]},e.uid)):(0,r.jsx)(ey,{value:"-",disabled:!0,children:"No members found"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"manualDate",children:"Date"}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(ek,{asChild:!0,children:(0,r.jsxs)(n.$,{id:"manualDate",variant:"outline",className:"w-full justify-start text-left font-normal h-10",disabled:eS,children:[(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4"}),ec?(0,f.GP)(ec,"PPP"):(0,r.jsx)("span",{children:"Pick a date"})]})}),(0,r.jsx)(eA,{className:"w-auto p-0",children:(0,r.jsx)(eN,{mode:"single",selected:ec,onSelect:em,initialFocus:!0,disabled:e=>e>new Date})})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"manualClockInTime",children:"Clock In Time"}),(0,r.jsx)(i.p,{id:"manualClockInTime",type:"time",value:ep,onChange:e=>eh(e.target.value),required:!0,disabled:eS,className:"h-10"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"manualClockOutTime",children:"Clock Out Time (Optional)"}),(0,r.jsx)(i.p,{id:"manualClockOutTime",type:"time",value:eb,onChange:e=>ej(e.target.value),disabled:eS,className:"h-10"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"manualNote",children:"Note (Optional)"}),(0,r.jsx)(c,{id:"manualNote",placeholder:"Reason for manual entry, task details, etc.",value:ev,onChange:e=>ew(e.target.value),disabled:eS,rows:3})]}),(0,r.jsxs)(n.$,{type:"submit",className:"w-full",disabled:eS||!eo||!ec||!ep,children:[eS?(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Add Manual Entry"]})]})})]}),(0,r.jsxs)(m.Zp,{className:"w-full max-w-4xl shadow-xl rounded-xl",children:[(0,r.jsxs)(m.aR,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between pb-4 gap-4",children:[(0,r.jsxs)(m.ZB,{className:"text-xl sm:text-2xl font-semibold",children:["Volunteer Entries for ",eU?(0,f.GP)(eU,"PPP"):"..."]}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(ek,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"outline",className:"w-full sm:w-auto",children:[(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Change Date"})]})}),(0,r.jsx)(eA,{className:"w-auto p-0",align:"end",children:(0,r.jsx)(eN,{mode:"single",selected:eU,onSelect:e=>{e&&eL(e)},disabled:e=>e>new Date,initialFocus:!0})})]})]}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(W,{logs:e9,currentUserName:e1,userRole:V,displayDate:eU})})]}),(0,r.jsxs)(m.Zp,{className:"w-full max-w-4xl shadow-xl rounded-xl",children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{className:"text-xl sm:text-2xl font-semibold",children:"Export & Data Management"})}),(0,r.jsxs)(m.Wu,{className:"space-y-4",children:["owner"===V&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.J,{htmlFor:"export-select",children:"Select Volunteer to Export"}),(0,r.jsxs)(eu,{value:eF,onValueChange:eV,children:[(0,r.jsx)(ex,{id:"export-select",children:(0,r.jsx)(ef,{})}),(0,r.jsxs)(eg,{children:[(0,r.jsx)(ey,{value:"__ALL_VOLUNTEERS__",children:"All Volunteers"}),e3.map(e=>(0,r.jsx)(ey,{value:e,children:e},e))]})]})]}),(0,r.jsxs)(n.$,{onClick:()=>{if(!eU)return;let e=(0,f.GP)(eU,"yyyy-MM-dd"),t=B.filter(t=>t.date===e);if("owner"===V&&"__ALL_VOLUNTEERS__"!==eF?t=t.filter(e=>e.name===eF):"member"===V&&(t=t.filter(e=>e.name===e1)),0===t.length)return void E({title:"No Data",description:"No entries to export for ".concat(e,"."),variant:"destructive"});let a=t.map(e=>({"Volunteer Name":e.name,"Clock In":(0,f.GP)(e.clockIn,"yyyy-MM-dd HH:mm:ss"),"Clock Out":e.clockOut?(0,f.GP)(e.clockOut,"yyyy-MM-dd HH:mm:ss"):"---",Duration:e.clockOut?"".concat(Math.floor((e.clockOut.getTime()-e.clockIn.getTime())/36e5),"h ").concat(Math.floor((e.clockOut.getTime()-e.clockIn.getTime())%36e5/6e4),"m"):"In Progress",Note:e.note||""})),r=K.Wp.json_to_sheet(a),s=K.Wp.book_new();K.Wp.book_append_sheet(s,r,"Volunteer Logs"),K._h(s,"VolunteerLogs_".concat(null==L?void 0:L.name.replace(/\s+/g,"_"),"_").concat(e,".xlsx")),E({title:"Export Successful",description:"Entries for ".concat(e," exported.")})},variant:"outline",className:"w-full",disabled:0===e9.length,children:[(0,r.jsx)(_.A,{className:"mr-2 h-5 w-5"})," Export to XLSX"]}),(0,r.jsxs)(Y,{open:eG,onOpenChange:eJ,children:[(0,r.jsx)(X,{asChild:!0,children:(0,r.jsxs)(n.$,{variant:"destructive",className:"w-full",disabled:0===e9.length,children:[(0,r.jsx)(y.A,{className:"mr-2 h-5 w-5"})," Clear All Entries for ",eU?(0,f.GP)(eU,"PPP"):"..."]})}),(0,r.jsxs)(et,{children:[(0,r.jsxs)(ea,{children:[(0,r.jsx)(es,{children:"Are you absolutely sure?"}),(0,r.jsxs)(el,{children:["This will permanently delete all volunteer log entries for ",eU?(0,f.GP)(eU,"PPP"):"the selected date",' in "',L.name,"\" from your browser's local storage."]})]}),(0,r.jsxs)(er,{children:[(0,r.jsx)(ei,{children:"Cancel"}),(0,r.jsx)(en,{onClick:()=>{if(!eU||!L)return;let e=(0,f.GP)(eU,"yyyy-MM-dd");q(t=>t.filter(t=>t.date!==e)),E({title:"Entries Cleared",description:"All entries for ".concat(e," have been cleared from local storage for this organization.")}),eJ(!1)},children:"Yes, clear entries"})]})]})]})]})]})]}):(0,r.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("p",{children:"Returning to Organization Hub..."})})}function eP(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-secondary/10",children:(0,r.jsx)(x.A,{className:"h-12 w-12 animate-spin text-primary"})}),children:(0,r.jsx)(eM,{})})}},7039:(e,t,a)=>{"use strict";let r,s,l;a.d(t,{db:()=>l,j:()=>s});var n=a(3915),i=a(3004),o=a(5317);let d={apiKey:"AIzaSyAOfD2G2l2wZcfnlMDflhNwqDLUpBQwA7o",authDomain:"ksht-log.firebaseapp.com",projectId:"ksht-log",storageBucket:"ksht-log.firebasestorage.app",messagingSenderId:"765926944390",appId:"1:765926944390:web:33e9224fa0eec820d62b07",measurementId:"G-4E9KRW3VSW"};if((0,n.Dk)().length)r=(0,n.Dk)().length>0?(0,n.Sx)():(0,n.Wp)(d),s=(0,i.xI)(r),l=(0,o.aU)(r);else try{r=(0,n.Wp)(d),s=(0,i.xI)(r),l=(0,o.aU)(r)}catch(e){console.error("Firebase initialization error",e),r=(0,n.Dk)()[0],s=(0,i.xI)(r),l=(0,o.aU)(r)}d.apiKey||console.error("Firebase config not loaded. Check your .env.local file and restart the server.")},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var r=a(2115);let s=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),queueMicrotask(()=>{o.forEach(e=>{e(d)})})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2596),s=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,416,524,221,486,635,687,441,684,358],()=>t(5503)),_N_E=e.O()}]);